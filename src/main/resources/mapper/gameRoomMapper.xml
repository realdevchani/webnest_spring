<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.webnest.mapper.GameRoomMapper">
    <!--  게임방 관련 Mapper  -->

    <!-- 게임방 전체 조회 -->
    <select id="selectAll" resultType="GameRoomDTO">
        SELECT
            TGR.ID, TGR.GAME_ROOM_TITLE, TGR.GAME_ROOM_IS_TEAM, TGR.GAME_ROOM_TYPE, TGR.GAME_ROOM_IS_OPEN,
            (
                SELECT COUNT(ID)
                FROM TBL_GAME_JOIN
                WHERE GAME_ROOM_ID = TGR.ID
            ) AS GAME_ROOM_CURRENT_PLAYER,
            GAME_ROOM_MAX_PLAYER, GAME_ROOM_IS_START, GAME_ROOM_PASS_KEY, GAME_ROOM_CREATE_AT, GAME_ROOM_LANGUAGE
        FROM TBL_GAME_ROOM TGR
    </select>

    <!-- 단일 채팅방 조회 -->
    <select id="select" parameterType="Long" resultType="GameRoomDTO">
        SELECT
        TGR.ID, TGR.GAME_ROOM_TITLE, TGR.GAME_ROOM_IS_TEAM, TGR.GAME_ROOM_TYPE, TGR.GAME_ROOM_IS_OPEN,
        (
        SELECT COUNT(ID)
        FROM TBL_GAME_JOIN
        WHERE GAME_ROOM_ID = TGR.ID
        ) AS GAME_ROOM_CURRENT_PLAYER,
        GAME_ROOM_MAX_PLAYER, GAME_ROOM_IS_START, GAME_ROOM_PASS_KEY, GAME_ROOM_CREATE_AT, GAME_ROOM_LANGUAGE
        FROM TBL_GAME_ROOM TGR
        WHERE TGR.ID = #{id}
    </select>

    <!-- 채팅방 추가 -->
    <!-- 채팅방 삭제 -->

</mapper>